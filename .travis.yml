dist: xenial   # required for Python >= 3.7
language: python
python:
  - "3.7"
env:
  - DJANGO=2.1 DB=default
install:
  - apt-get update && apt-get install -y apt-transport-https ca-certificates
  - curl https://packages.microsoft.com/keys/microsoft.asc | apt-key add -
  - curl https://packages.microsoft.com/config/debian/9/prod.list > /etc/apt/sources.list.d/mssql-release.list
  - apt-get update
  - ACCEPT_EULA=Y apt-get install -y msodbcsql17 mssql-tools mssql-cli  
  - apt-get install -y unixodbc-dev
  - pip install -r requirements.txt
before_script:
  - python modules-requirements.py openimis.json > modules-requirements.txt
  - pip install -r modules-requirements.txt
script:
  - cd openIMIS
  - python manage.py test core -n
